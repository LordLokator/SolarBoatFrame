# Nincs validálva!

Bálint: validáltam ekkor: ####

Berni: validáltam ekkor: ####

Regina: validáltam ekkor: ####

Tamás: validáltam ekkor: ####

---


| Symbol           | Name                       | Equation / Value                             | Short Description                      |
| ---------------- | -------------------------- | -------------------------------------------- | -------------------------------------- |
| $x, y$           | Position                   | –                                            | Ship's position in Earth-fixed frame   |
| $\psi$           | Heading angle              | –                                            | Ship's orientation w\.r.t. North       |
| $u, v$           | Surge & sway speed         | –                                            | Velocities in ship’s local frame       |
| $r$              | Yaw rate                   | –                                            | Rotation rate around vertical axis     |
| $\eta$           | Position vector            | $[x, y, \psi]^T$                             | In Earth-fixed frame                   |
| $\nu$            | Velocity vector            | $[u, v, r]^T$                                | In body-fixed frame                    |
| $R(\psi)$        | Rotation matrix            | See Eq. (3)                                  | Transforms velocities between frames   |
| $\psi_k$         | Segment heading            | $\text{atan2}(y_{k+1} - y_k, x_{k+1} - x_k)$ | Desired heading for current segment    |
| $\Delta \psi_k$  | Course change              | $\psi_{k+1} - \psi_k$                        | Angle between consecutive segments     |
| $L_k$            | Turn start distance        | $f(\Delta \psi_k)$                           | Distance before waypoint to start turn |
| $S_c(t)$         | Control vector             | $[\delta_c(t), n_{gc}(t)]^T$                 | Commanded rudder angle & prop speed    |
| $\delta$         | Rudder angle               | –                                            | Commanded deflection                   |
| $n_g$            | Propeller shaft speed      | –                                            | Motor RPM                              |
| $T$              | Propeller thrust           | $k_{Tp} n_g^2$ or $k_{Tn} n_g^2$             | Force generated by propeller           |
| $F_D, F_L$       | Drag & lift forces         | See Eq. (13-14)                              | Forces by rudder blade                 |
| $\beta_R$        | Rudder drift angle         | $\text{atan2}(v_\delta, u_\delta)$           | Flow angle at rudder                   |
| $u_\delta$       | Longitudinal inflow        | See Eq. (17)                                 | Water jet in surge direction           |
| $v_\delta$       | Transverse inflow          | $v_\delta = v - 2rL$                         | Water jet in sway direction            |
| $\tau$           | Force vector               | Eq. (11, 19)                                 | Total forces/torques on hull           |
| $M, C, D$        | System matrices            | Eq. (8-10)                                   | Inertia, Coriolis, Damping             |
| $\tau_X$         | Surge force                | $X_n n_g$                                    | From propeller thrust                  |
| $\tau_Y$         | Sway force                 | $-Y_\delta \delta$                           | From rudder deflection                 |
| $\tau_N$         | Yaw moment                 | $-N_\delta \delta$                           | Rudder torque                          |
| $r = \dot{\psi}$ | Yaw rate                   | –                                            | Derivative of heading angle            |
| $e_\psi$         | Heading error              | $\psi - \psi_k$                              | Angle diff. from desired segment       |
| $e_y$            | Cross-track error          | See Eq. (41)                                 | Lateral deviation from track           |
| $y_I$            | Integral cross-track error | $\dot{y}_I = e_y$                            | For PI control                         |
| $\delta_c$       | Controller output          | $u_{PD} + u_{PI}$                            | Rudder angle command                   |
| $a, b$           | Nomoto model coeffs        | $a = -1/T, b = K/T$                          | First-order yaw dynamics               |
| $k_1..k_4$       | Controller gains           | PDPI: 1.6, 19.92, 2.125, 92.1                | Gains from pole placement              |



# HIBÁS, de a formázás értékes. TODO: Javítani!

Hiba pl az összes $d_{xy}$ alakú tagnál!

---

| Symbol           | Name                       | Equation / Value                             | Short Description                      |
| ---------------- | -------------------------- | -------------------------------------------- | -------------------------------------- |
| $ R(\psi) $ | Rotation matrix             |   $R(\psi) = \begin{bmatrix} \cos\psi & -\sin\psi & 0 \\ \sin\psi & \cos\psi & 0 \\ 0 & 0 & 1 \end{bmatrix}$   | Transforms velocity from body to Earth frame |
|   $M$         | Inertia matrix              |   $M = \begin{bmatrix} m - X_{\dot{u}} & 0 & 0 \\ 0 & m - Y_{\dot{v}} & m x_G - Y_{\dot{r}} \\ 0 & m x_G - N_{\dot{v}} & I_z - N_{\dot{r}} \end{bmatrix}$   | Accounts for mass, added mass, inertia        |
|   $C(\nu)$    | Coriolis/Centripetal matrix |   $C(\nu) = \begin{bmatrix} 0 & 0 & -m(x_G r + v) \\ 0 & 0 & m u \\ m(x_G r + v) & -m u & 0 \end{bmatrix}$   | Nonlinear velocity-dependent effects          |
|   $D(\nu)$    | Damping matrix              |   $D(\nu) = \begin{bmatrix} d_{11} & 0 & 0 \\ 0 & d_{22}(\nu) & d_{23}(\nu) \\ 0 & d_{32}(\nu) & d_{33}(\nu) \end{bmatrix}$   | Hydrodynamic damping based on velocity        |
|   $d_{22}(\nu)$   | Sway damping term       |   $d_{22}(v)$ = $Y_{v\|v\|}$ + \|r\| $Y_{r\|r\|}$                                  | Nonlinear sway damping                         |
|   $d_{23}(\nu)$   | Cross damping term      |   $d_{23}(v)$ = $Y_{v\|r\|}$ + \|r\| $Y_{r\|v\|}$                                  | Cross-coupling term                           |
|   $d_{32}(\nu)$   | Cross damping term      |   $d_{32}(v)$ = $N_{v\|r\|}$ + \|r\| $N_{r\|v\|}$                                  | Cross-coupling term                           |
|   $d_{33}(\nu)$   | Yaw damping term        |   $d_{33}(v)$ = $N_{v\|v\|}$ + \|r\| $N_{r\|r\|}$                                  | Yaw resistance                                 |
|   $\tau$      | Total forces/torques        |   $\tau = \tau_{hull} + \tau_{thrust} + \tau_{env}$                      | Sum of internal + propeller + external forces |
|   $\tau = [X, Y, N]^T$   | Force vector    |   $\begin{bmatrix} T - k_T^n n_g^2 \\ -Y_\delta \delta \\ -N_\delta \delta \end{bmatrix}$   | Forces in x, y and yaw moment                 |
|   $\delta_c$   | PDPI control law           |   $\delta_c = k_1 e_\psi + k_2 \dot{e}_\psi + k_3 e_y + k_4 \int e_y dt$   | Final rudder command from controller          |
